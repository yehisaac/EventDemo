# æ´»å‹•å ±åç³»çµ± - æ¨¡çµ„åŒ–æ¶æ§‹æ–‡ä»¶

> **ç‰ˆæœ¬**: 3.1.0 Modular
> **æœ€å¾Œæ›´æ–°**: 2026-01-28

---

## ğŸ“ ç³»çµ±æ¶æ§‹

æœ¬ç³»çµ±æ¡ç”¨å®Œå…¨æ¨¡çµ„åŒ–æ¶æ§‹ï¼š

### æ¶æ§‹ç‰¹è‰²
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**: ä»£ç¢¼æ‹†åˆ†ç‚º 9 å€‹ç¨ç«‹æ¨¡çµ„
- **AI å‹å–„**: æ¸›å°‘ 60-80% AI token æ¶ˆè€—
- **æ˜“æ–¼ç¶­è­·**: æ¸…æ™°çš„è·è²¬åˆ†é›¢
- **é©åˆ**: åœ˜éšŠå”ä½œã€ç”Ÿç”¢ç’°å¢ƒã€é•·æœŸç¶­è­·

---

## ğŸ—ï¸ æ¨¡çµ„åŒ–ç›®éŒ„çµæ§‹

```
EventDemo/
â”œâ”€â”€ index.html              # ä¸»HTMLå…¥å£ï¼ˆæ¨¡çµ„åŒ–ç‰ˆæœ¬ï¼‰
â”œâ”€â”€ event.html              # å–®æ–‡ä»¶å®Œæ•´ç‰ˆæœ¬
â”‚
â”œâ”€â”€ css/
â”‚   â””â”€â”€ styles.css          # æ‰€æœ‰UIæ¨£å¼ï¼ˆå·²å®Œæˆï¼‰
â”‚
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ config.js          # å…¨å±€é…ç½®ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ storage.js         # LocalStorageæ“ä½œï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ utils.js           # å·¥å…·å‡½æ•¸ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ auth.js            # ç™»å…¥ç³»çµ±ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ waitlist.js        # å€™è£œåå–®é‚è¼¯ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ checkin.js         # ç°½åˆ°ç¢¼ç³»çµ±ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ task.js            # ä»»å‹™ç³»çµ±ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ admin.js           # ç®¡ç†è€…åŠŸèƒ½ï¼ˆå¾…å®Œæˆï¼‰
â”‚   â””â”€â”€ user.js            # ä½¿ç”¨è€…åŠŸèƒ½ï¼ˆå¾…å®Œæˆï¼‰
â”‚
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ qrcode.min.js      # QR Codeåº«ï¼ˆå¯é¸ï¼šæœ¬åœ°åŒ–ï¼‰
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ README.md          # ä¸»æ–‡æª”
    â”œâ”€â”€ CLAUDE.md          # AIé–‹ç™¼æŒ‡å—
    â””â”€â”€ event-system-spec.md  # æŠ€è¡“è¦æ ¼
```

---

## âœ… å·²å®Œæˆçš„æ¨¡çµ„

### 1. config.js - å…¨å±€é…ç½®
```javascript
// å…¨å±€è®Šé‡
- currentUser: ç•¶å‰ä½¿ç”¨è€…ID
- currentRole: 'admin' | 'user'
```

### 2. storage.js - è³‡æ–™å­˜å„²
```javascript
// LocalStorage CRUDæ“ä½œ
- initStorage()
- getEvents() / saveEvents()
- getRegistrations() / saveRegistrations()
- getUserPoints() / saveUserPoints()
- getTaskClaims() / saveTaskClaim()
- resetAllData()
```

### 3. utils.js - å·¥å…·å‡½æ•¸
```javascript
- maskUserId(userId)           // IDé®ç½©è™•ç†
- isEventExpired(event)        // æ´»å‹•éæœŸåˆ¤æ–·
- isInTimeRange()              // æ™‚é–“å€é–“æª¢æŸ¥
```

### 4. auth.js - ç™»å…¥èªè­‰
```javascript
- loginAsAdmin()               // ç®¡ç†è€…ç™»å…¥
- loginAsUser()                // ä½¿ç”¨è€…ç™»å…¥
- logout()                     // ç™»å‡º
```

### 5. waitlist.js - å€™è£œæ©Ÿåˆ¶
```javascript
- getApprovedCount(eventId)    // è¨ˆç®—å·²æ ¸å‡†äººæ•¸
- promoteFromWaitlist(eventId) // è‡ªå‹•éè£œ
- promoteWaitlistUser()        // æ‰‹å‹•éè£œ
- cancelWaitlist(eventId)      // å–æ¶ˆå€™è£œ
```

### 6. checkin.js - ç°½åˆ°ç¢¼ç³»çµ±
```javascript
- generateCheckinCode()        // ç”Ÿæˆ6ä½ç°½åˆ°ç¢¼
- updateCheckinCode(eventId)   // æ›´æ–°ç°½åˆ°ç¢¼ï¼ˆ30ç§’ï¼‰
- isCheckinCodeValid(event)    // é©—è­‰æœ‰æ•ˆæœŸ
- validateCheckinCode()        // é©—è­‰è¼¸å…¥ç¢¼
```

### 7. task.js - ä»»å‹™ç³»çµ±
```javascript
- calculateUserTaskProgress()  // è¨ˆç®—ä»»å‹™é€²åº¦
- claimTaskReward()            // é ˜å–çå‹µ
```

---

## âœ… æ‰€æœ‰æ¨¡çµ„å·²å®Œæˆï¼

### admin.js - ç®¡ç†è€…åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
å·²å¯¦ç¾çš„å‡½æ•¸ï¼š

```javascript
// ç•«é¢æ¸²æŸ“
- renderAdminScreen()          // æ¸²æŸ“ç®¡ç†è€…ä»‹é¢
- startCheckinTimer()          // ç°½åˆ°ç¢¼å€’æ•¸è¨ˆæ™‚
- refreshCheckinCode()         // æ‰‹å‹•æ›´æ–°ç°½åˆ°ç¢¼

// æ´»å‹•ç®¡ç†
- showAddEventModal()          // é¡¯ç¤ºæ–°å¢æ´»å‹•è¡¨å–®
- editEvent(eventId)           // ç·¨è¼¯æ´»å‹•
- deleteEvent(eventId)         // åˆªé™¤æ´»å‹•
- handleEventTypeChange()      // å‹•æ…‹è¡¨å–®åˆ‡æ›
- closeEventModal()            // é—œé–‰æ¨¡æ…‹æ¡†
- saveEvent(event)             // å„²å­˜æ´»å‹•ï¼ˆè¡¨å–®æäº¤ï¼‰

// å ±åç®¡ç†
- viewRegistrations(eventId)   // æŸ¥çœ‹å ±åæ˜ç´°ï¼ˆå«ç°½åˆ°ç¢¼é¡¯ç¤ºï¼‰
- closeRegistrationsModal()    // é—œé–‰å ±åæ˜ç´°
- approveRegistration()        // æ ¸å‡†å ±å
- rejectRegistration()         // æ‹’çµ•å ±åï¼ˆè§¸ç™¼è‡ªå‹•éè£œï¼‰

// æŠ½çåŠŸèƒ½
- executeDraw(eventId)         // åŸ·è¡ŒæŠ½ç
```

### user.js - ä½¿ç”¨è€…åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
å·²å¯¦ç¾çš„å‡½æ•¸ï¼š

```javascript
// ç•«é¢æ¸²æŸ“
- renderUserScreen()           // æ¸²æŸ“ä½¿ç”¨è€…ä»‹é¢ï¼ˆå«ä»»å‹™é€²åº¦ï¼‰

// æ´»å‹•å ±å
- registerEvent(eventId)       // å ±åæ´»å‹•ï¼ˆæ”¯æ´å€™è£œï¼‰
- cancelRegistration(eventId)  // å–æ¶ˆå ±åï¼ˆè§¸ç™¼è‡ªå‹•éè£œï¼‰

// ç°½åˆ°åŠŸèƒ½
- checkIn(eventId)             // ç°½åˆ°ï¼ˆæ”¯æ´ç°½åˆ°ç¢¼é©—è­‰ï¼‰

// æ´»å‹•è©³æƒ…
- viewEventDetail(eventId)     // æŸ¥çœ‹æ´»å‹•è©³æƒ…
- closeEventDetailModal()      // é—œé–‰è©³æƒ…æ¨¡æ…‹æ¡†
- closeDetailModal()           // åˆ¥åï¼ˆå‘å¾Œå…¼å®¹ï¼‰
```

---

## âœ… ç³»çµ±æ¶æ§‹å®Œæˆ

å®Œæ•´çš„æ¨¡çµ„åŒ–æ¶æ§‹å·²å¯¦ç¾ï¼š

- âœ… æ‰€æœ‰ CSS æ¨£å¼ç¨ç«‹æ–¼ [css/styles.css](css/styles.css)
- âœ… JavaScript åŠŸèƒ½æ‹†åˆ†ç‚º 9 å€‹å°ˆç”¨æ¨¡çµ„
- âœ… HTML çµæ§‹æ–¼ [index.html](index.html)
- âœ… QR Code åº«æ•´åˆ
- âœ… æ‰€æœ‰ v3.1.0 åŠŸèƒ½å®Œæ•´å¯¦ç¾

### æ¸¬è©¦æª¢æŸ¥æ¸…å–®

å•Ÿå‹•æœ¬åœ°ä¼ºæœå™¨å¾Œï¼Œè«‹é©—è­‰ä»¥ä¸‹åŠŸèƒ½ï¼š

**ç®¡ç†è€…ç«¯ï¼š**
- âœ… æ–°å¢ Online/OnSite/Task æ´»å‹•
- âœ… ç·¨è¼¯æ´»å‹•è³‡è¨Š
- âœ… åˆªé™¤æ´»å‹•
- âœ… æŸ¥çœ‹å ±åæ˜ç´°
- âœ… æ ¸å‡†/æ‹’çµ•å ±åï¼ˆè‡ªå‹•éè£œå€™è£œåå–®ï¼‰
- âœ… æ‰‹å‹•éè£œå€™è£œä½¿ç”¨è€…
- âœ… å‹•æ…‹ç°½åˆ°ç¢¼é¡¯ç¤ºï¼ˆå« QR Codeï¼‰
- âœ… åŸ·è¡ŒæŠ½çï¼ˆåƒ…åœ¨å ±åæˆªæ­¢å¾Œå¯åŸ·è¡Œï¼‰
- âœ… çµ±è¨ˆå¡ç‰‡å¯¦æ™‚æ›´æ–°

**ä½¿ç”¨è€…ç«¯ï¼š**
- âœ… ç€è¦½æ´»å‹•åˆ—è¡¨
- âœ… å ±åæ´»å‹•ï¼ˆæ”¯æ´å€™è£œï¼‰
- âœ… å–æ¶ˆå ±åï¼ˆè§¸ç™¼è‡ªå‹•éè£œï¼‰
- âœ… ç°½åˆ°ï¼ˆæ”¯æ´ç°½åˆ°ç¢¼é©—è­‰ï¼‰
- âœ… æŸ¥çœ‹æ´»å‹•è©³æƒ…
- âœ… ä»»å‹™é€²åº¦è¿½è¹¤
- âœ… é ˜å–ä»»å‹™çå‹µ

---

## ğŸ¯ AI ç¶­è­·å„ªå‹¢

### Token ä½¿ç”¨é‡å°æ¯”

| ä»»å‹™é¡å‹ | å–®æ–‡ä»¶ç‰ˆæœ¬ | æ¨¡çµ„åŒ–ç‰ˆæœ¬ | ç¯€çœ |
|---------|-----------|-----------|------|
| ä¿®æ”¹å€™è£œé‚è¼¯ | è®€å–å…¨æ–‡2330è¡Œ | åƒ…è®€å–waitlist.js (120è¡Œ) | **95%** |
| å„ªåŒ–UIæ¨£å¼ | è®€å–å…¨æ–‡2330è¡Œ | åƒ…è®€å–styles.css (800è¡Œ) | **66%** |
| ä¿®æ”¹ç°½åˆ°åŠŸèƒ½ | è®€å–å…¨æ–‡2330è¡Œ | åƒ…è®€å–checkin.js (60è¡Œ) | **97%** |
| æ–°å¢ç®¡ç†è€…åŠŸèƒ½ | è®€å–å…¨æ–‡2330è¡Œ | åƒ…è®€å–admin.js (400è¡Œ) | **83%** |

**å¹³å‡ç¯€çœ**: 60-80% tokenæ¶ˆè€—

### ç¤ºä¾‹å°è©±

**å–®æ–‡ä»¶ç‰ˆæœ¬**:
```
AI: æˆ‘éœ€è¦è®€å– event.html å…¨æ–‡ï¼ˆ2330è¡Œï¼Œç´„150k tokensï¼‰
    ä¾†ç†è§£å€™è£œé‚è¼¯...
```

**æ¨¡çµ„åŒ–ç‰ˆæœ¬**:
```
AI: æˆ‘åªéœ€è®€å– waitlist.jsï¼ˆ120è¡Œï¼Œç´„8k tokensï¼‰
    å³å¯ä¿®æ”¹å€™è£œé‚è¼¯
```

---

## ğŸ“Š åŠŸèƒ½å°ç…§è¡¨

| åŠŸèƒ½æ¨¡çµ„ | æ–‡ä»¶ä½ç½® | è¡Œæ•¸ä¼°è¨ˆ | æ˜¯å¦å®Œæˆ |
|---------|---------|---------|---------|
| UIæ¨£å¼ | css/styles.css | ~800 | âœ… |
| å…¨å±€é…ç½® | js/config.js | ~10 | âœ… |
| è³‡æ–™å­˜å„² | js/storage.js | ~80 | âœ… |
| å·¥å…·å‡½æ•¸ | js/utils.js | ~40 | âœ… |
| ç™»å…¥èªè­‰ | js/auth.js | ~40 | âœ… |
| å€™è£œåå–® | js/waitlist.js | ~120 | âœ… |
| ç°½åˆ°ç¢¼ | js/checkin.js | ~60 | âœ… |
| ä»»å‹™ç³»çµ± | js/task.js | ~50 | âœ… |
| ç®¡ç†è€…åŠŸèƒ½ | js/admin.js | ~400 | âœ… |
| ä½¿ç”¨è€…åŠŸèƒ½ | js/user.js | ~350 | âœ… |

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å•Ÿå‹•ç³»çµ±
```bash
# éœ€è¦æœ¬åœ°ä¼ºæœå™¨ï¼ˆå› ç‚ºä½¿ç”¨ ES6 æ¨¡çµ„è¼‰å…¥ï¼‰
python -m http.server 8000
# æˆ–
npx serve

# è¨ªå• http://localhost:8000/index.html
```

### æ¸¬è©¦æµç¨‹
```bash
# 1. å•Ÿå‹•ä¼ºæœå™¨
python -m http.server 8000

# 2. é–‹å•Ÿç€è¦½å™¨
# è¨ªå• http://localhost:8000/index.html

# 3. ç®¡ç†è€…ç™»å…¥
# é»æ“Šã€Œç®¡ç†è€…ç™»å…¥ã€æ¸¬è©¦æ´»å‹•ç®¡ç†åŠŸèƒ½

# 4. ä½¿ç”¨è€…ç™»å…¥
# è¼¸å…¥ä½¿ç”¨è€… ID æ¸¬è©¦å ±åã€ç°½åˆ°ç­‰åŠŸèƒ½
```

### æœ¬åœ°åŒ– QR Code åº«ï¼ˆå¯é¸ï¼‰
```bash
# ä¸‹è¼‰ QR Code åº«åˆ°æœ¬åœ°
wget https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js
mv qrcode.min.js lib/

# ä¿®æ”¹ index.html ä¸­çš„å¼•ç”¨è·¯å¾‘
# å°‡ CDN é€£çµæ”¹ç‚º <script src="lib/qrcode.min.js"></script>
```

---

## ğŸ“ ç¶­è­·æŒ‡å—

### AIç¶­è­·æ™‚çš„æœ€ä½³å¯¦è¸

1. **æ˜ç¢ºæŒ‡å®šæ¨¡çµ„**
   ```
   âŒ "ä¿®æ”¹æ´»å‹•ç³»çµ±çš„å€™è£œåŠŸèƒ½"
   âœ… "ä¿®æ”¹ js/waitlist.js ä¸­çš„ promoteFromWaitlist å‡½æ•¸"
   ```

2. **åªè®€å–ç›¸é—œæ–‡ä»¶**
   ```
   âŒ è®€å–æ•´å€‹å°ˆæ¡ˆ
   âœ… åªè®€å– js/waitlist.js å’Œ js/admin.js
   ```

3. **ä½¿ç”¨æ¨¡çµ„åŒ–æ€ç¶­**
   ```
   âŒ åœ¨ä¸€å€‹æ–‡ä»¶ä¸­å¯¦ç¾æ‰€æœ‰åŠŸèƒ½
   âœ… å°‡æ–°åŠŸèƒ½æ‹†åˆ†åˆ°å°æ‡‰æ¨¡çµ„
   ```

### æ–‡ä»¶å‘½åè¦ç¯„

- **åŠŸèƒ½æ¨¡çµ„**: `{feature}.js` (å¦‚ `waitlist.js`, `checkin.js`)
- **è§’è‰²æ¨¡çµ„**: `{role}.js` (å¦‚ `admin.js`, `user.js`)
- **é€šç”¨æ¨¡çµ„**: `{purpose}.js` (å¦‚ `utils.js`, `storage.js`)

---

## ğŸ”— ç›¸é—œæ–‡æª”

- [README.md](README.md) - ç³»çµ±éœ€æ±‚è¦æ ¼
- [CLAUDE.md](CLAUDE.md) - AI é–‹ç™¼æŒ‡å—
- [event-system-spec.md](event-system-spec.md) - æŠ€è¡“è¦æ ¼
- [event.html](event.html) - å–®æ–‡ä»¶å®Œæ•´ç‰ˆæœ¬

---

## ğŸ’¡ å¸¸è¦‹å•é¡Œ

**Q: ç‚ºä»€éº¼éœ€è¦æœ¬åœ°ä¼ºæœå™¨ï¼Ÿ**
A: å› ç‚ºç³»çµ±ä½¿ç”¨ ES6 æ¨¡çµ„è¼‰å…¥ï¼ˆ`<script src="...">`ï¼‰ï¼Œç€è¦½å™¨åŸºæ–¼å®‰å…¨é™åˆ¶ï¼Œç„¡æ³•ç›´æ¥å¾ file:// å”è­°è¼‰å…¥æ¨¡çµ„ã€‚

**Q: ç³»çµ±éœ€è¦ç·¨è­¯å—ï¼Ÿ**
A: ä¸éœ€è¦ï¼æ‰€æœ‰æ¨¡çµ„éƒ½æ˜¯ç´” JavaScriptï¼Œåªéœ€æœ¬åœ°ä¼ºæœå™¨å³å¯é‹è¡Œã€‚

**Q: å¦‚ä½•éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒï¼Ÿ**
A: å°‡æ•´å€‹è³‡æ–™å¤¾éƒ¨ç½²åˆ°ä»»ä½•éœæ…‹ç¶²ç«™è¨—ç®¡æœå‹™ï¼ˆGitHub Pagesã€Netlifyã€Vercel ç­‰ï¼‰å³å¯ã€‚

**Q: LocalStorage è³‡æ–™æœƒéºå¤±å—ï¼Ÿ**
A: LocalStorage è³‡æ–™å­˜å„²åœ¨ç€è¦½å™¨æœ¬åœ°ï¼Œæ¸…é™¤ç€è¦½å™¨å¿«å–æœƒéºå¤±è³‡æ–™ã€‚ç”Ÿç”¢ç’°å¢ƒå»ºè­°æ­é…å¾Œç«¯ APIã€‚

**Q: å¤šå€‹ä½¿ç”¨è€…å¦‚ä½•å…±äº«è³‡æ–™ï¼Ÿ**
A: ç›®å‰ç³»çµ±ä½¿ç”¨ LocalStorageï¼ŒåŒä¸€ç€è¦½å™¨çš„æ‰€æœ‰ä½¿ç”¨è€…å…±äº«è³‡æ–™ã€‚è‹¥éœ€ä½¿ç”¨è€…éš”é›¢ï¼Œå»ºè­°å¯¦ä½œå¾Œç«¯ API æˆ–æ”¹ç”¨ SessionStorageã€‚

---

## ğŸ“‹ ç‰ˆæœ¬è³‡è¨Š

**ç‰ˆæœ¬**: 3.1.0 Modular
**æœ€å¾Œæ›´æ–°**: 2026-01-28
**æˆæ¬Š**: MIT

### v3.1.0 æ›´æ–°å…§å®¹
- âœ… å®Œæˆæ¨¡çµ„åŒ–æ¶æ§‹ï¼ˆ9 å€‹æ¨¡çµ„ï¼‰
- âœ… æ–°å¢æŠ½çæ™‚é–“é™åˆ¶ï¼ˆå ±åæˆªæ­¢å¾Œæ‰å¯æŠ½çï¼‰
- âœ… ç®¡ç†è€…çµ±è¨ˆå¡ç‰‡å¯¦æ™‚æ›´æ–°
- âœ… ç§»é™¤å–®æ–‡ä»¶ç‰ˆæœ¬ï¼Œå°ˆæ³¨æ¨¡çµ„åŒ–ç¶­è­·

### v3.0.0 æ ¸å¿ƒåŠŸèƒ½
- âœ… Online/OnSite/Task ä¸‰ç¨®æ´»å‹•é¡å‹
- âœ… å€™è£œåå–®è‡ªå‹•éè£œæ©Ÿåˆ¶
- âœ… å‹•æ…‹ç°½åˆ°ç¢¼ç³»çµ±ï¼ˆ30ç§’æ›´æ–° + QR Codeï¼‰
- âœ… ä»»å‹™ç´¯ç©èˆ‡é»æ•¸çå‹µ
- âœ… æŠ½çåŠŸèƒ½ï¼ˆåƒ…é™ Online æ´»å‹•ï¼‰

---
